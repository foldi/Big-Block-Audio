<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name = "viewport" content = "user-scalable=no, width=device-width, initial-scale = 1.0">
        <title>Big Block Audio</title>

		<script src="js/bigblockaudio.js"></script>
		
		<script type="text/javascript">
			
			var i, path, body, loading, button, filename, container_complete, complete_msg, error_msg;
			
			path = "http://www.foldifoldi.com/audio/";
						
			BigBlockAudio.ready = function () {
				BigBlockAudio.debug_message_target = document.getElementById("debug_messages");
				BigBlockAudio.debug = true;
				BigBlockAudio.after_loading_complete = function () {
					if (BigBlockAudio.loading_complete === true) {
						if (!document.getElementById("container_complete")) {
							container_complete = document.createElement("div");
							container_complete.setAttribute("id", "container_complete");
							container_complete.setAttribute("style", "padding-top:10px;");
							complete_msg = document.createTextNode("loading complete!");
							container_complete.appendChild(complete_msg);
							body[0].appendChild(container_complete);
							for (var i in BigBlockAudio.playlist) { // for debugging
								if (BigBlockAudio.playlist.hasOwnProperty(i)) {
									body[0].appendChild(BigBlockAudio.playlist[i]);
								}
							}							
						}
					}
				};				
				if (BigBlockAudio.supported) {
					BigBlockAudio.files_to_play = ["bing", "blip", "bonk", "boom", "coin", "eeoo", "jump"];
					for (i = 0; i < BigBlockAudio.files_to_play.length; i++) {
						filename = BigBlockAudio.files_to_play[i];
						BigBlockAudio.add(filename, path, false, function (e) {
							if (!BigBlockAudio.loading_complete) {
								BigBlockAudio.create_button(e.target.id);
							}
						});
					}
				} else {
					loading = document.getElementById("loading");
					
					if (loading) {
						body[0].removeChild(loading);
					}
					error_msg = document.createTextNode("This browser does not supported HTML5 audio.");
					body[0].appendChild(error_msg);				
				}
			}
			
			BigBlockAudio.create_button = function (filename) {
				loading = document.getElementById("loading");
				body = document.getElementsByTagName("body");
				if (loading) {
					body[0].removeChild(loading);
				}
				button = document.createElement("input");
				button.setAttribute("type", "submit");
				button.setAttribute("value", filename);
				if (button.addEventListener) {
					button.addEventListener("mouseup", function () {
						BigBlockAudio.play(filename);
					}, false); 
				} else if (button.attachEvent) {
					button.attachEvent("onmouseup", function () {
						BigBlockAudio.play(filename);
					});
				}
				body[0].appendChild(button);
				setTimeout(function () {
					if (BigBlockAudio.loading_complete === true) {
						delete BigBlockAudio.add;
					}
				}, 0);
			};
		
		</script>
	</head>
	<body onload="setTimeout('BigBlockAudio.ready()', 0)">
		<div id="loading">loading audio...</div>
		<noscript>You must enable JavaScript to view this demo.</noscript>
		<div><textarea id="debug_messages" cols="100" rows="20" style="margin-bottom:10px;"></textarea></div>
	</body>
</html>